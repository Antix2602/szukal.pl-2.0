<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Szukaj.pl 2.0</title>
<style>
body {margin:0; font-family:Arial,sans-serif; background:linear-gradient(135deg,#1e1e2f,#3a3a5c); color:white; min-height:100vh; display:flex; flex-direction:column; align-items:center; transition:0.5s;}
.container {margin-top:60px; width:90%; max-width:700px; text-align:center; animation:fadeIn 1s ease;}
h1 {font-size:2.5rem; margin-bottom:25px; background:linear-gradient(to right,#ff416c,#ff4b2b); -webkit-background-clip:text; -webkit-text-fill-color:transparent; cursor:pointer; transition:transform 0.3s;}
h1:hover{transform:scale(1.05);}
.search-box{display:flex; justify-content:center; margin-bottom:25px; animation:slideIn 0.8s ease;}
input[type=text]{width:70%; padding:12px 15px; border:none; border-radius:25px 0 0 25px; outline:none; font-size:1rem; transition:0.3s;}
input[type=text]:focus{box-shadow:0 0 12px #ff416c;}
button{padding:12px 20px; border:none; border-radius:0 25px 25px 0; background:#ff4b2b; color:white; cursor:pointer; transition:0.3s;}
button:hover{background:#ff416c; transform:scale(1.05);}
.results{margin-top:30px; display:flex; flex-direction:column; width:100%;}
.result-item{background:white; color:black; padding:18px; border-radius:12px; margin-bottom:15px; opacity:0; transform:translateY(20px); animation:fadeSlide 0.6s forwards;}
.result-item a{color:#1a0dab; font-size:1.2rem; font-weight:bold; text-decoration:none;}
.result-item a:hover{text-decoration:underline;}
.result-item p{margin-top:6px; font-size:0.95rem; color:#333;}
.theme-toggle{margin-top:15px; padding:8px 15px; border:none; border-radius:20px; cursor:pointer; background:#444; color:white; transition:0.3s;}
.theme-toggle:hover{background:#666;}
body.light{background:#f5f5f5; color:black;}
body.light .result-item{background:#fff; color:black;}
body.light button{background:#4285f4;}
body.light button:hover{background:#357ae8;}
body.light h1{-webkit-text-fill-color:initial; background:none; color:#222;}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideIn{from{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes fadeSlide{to{opacity:1; transform:translateY(0);}}
</style>
</head>
<body>
<div class="container">
<h1 onclick="resetSearch()">Szukaj.pl 2.0</h1>
<div class="search-box">
<input type="text" id="searchInput" placeholder="Szukaj w internecie...">
<button onclick="performSearch(true)">üîç</button>
</div>
<button class="theme-toggle" onclick="toggleTheme()">üåô/‚òÄÔ∏è</button>
<div class="results" id="results"></div>
</div>

<script>
let input=document.getElementById("searchInput");
let resultsDiv=document.getElementById("results");
let offset=0;
let loading=false;
let currentQuery="";

async function performSearch(reset=true){
  if(loading) return;
  if(reset){ resultsDiv.innerHTML=""; offset=0; currentQuery=input.value.trim();}
  const query=currentQuery;
  if(!query) return;
  loading=true;
  try{
    const res=await fetch(`/search?q=${encodeURIComponent(query)}&offset=${offset}`);
    const data=await res.json();
    if(data.length===0 && offset===0){ resultsDiv.innerHTML=`<p>‚ùå Brak wynik√≥w dla "<b>${query}</b>"</p>`; loading=false; return;}
    data.forEach((item,index)=>{
      const div=document.createElement("div");
      div.classList.add("result-item");
      div.style.animationDelay=`${(offset+index)*0.05}s`;
      div.innerHTML=`<a href="${item.link}" target="_blank">${item.title}</a><p>${item.snippet}</p>`;
      resultsDiv.appendChild(div);
    });
    offset+=data.length;
  }catch{ if(offset===0) resultsDiv.innerHTML="<p>‚ö†Ô∏è B≈ÇƒÖd pobierania wynik√≥w.</p>"; }
  loading=false;
}

window.addEventListener("scroll", ()=>{
  if(window.innerHeight + window.scrollY >= document.body.offsetHeight - 50){
    performSearch(false);
  }
});

function toggleTheme(){ document.body.classList.toggle("light"); }
function resetSearch(){ input.value=""; resultsDiv.innerHTML=""; offset=0; currentQuery=""; }
</script>
</body>
</html>





